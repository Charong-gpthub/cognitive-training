# 03 模板与指标统一规范

## 1. 目标

把以下两套模板统一为单一落地标准：

1. `glm5/TEMPLATE.md`（完整深度模板）
2. `gpt/TEMPLATE.md`（讨论版快速模板）

## 2. 统一模板原则

1. 结构深度采用 `glm5/TEMPLATE.md`。
2. 填写效率采用 `gpt/TEMPLATE.md` 的“先关键字段后扩展字段”方式。
3. 评分规则必须“先字段定义，再阈值策略”，避免先给阈值但字段不稳定。

## 3. 必填章节（发布前必须完整）

1. 元信息  
   文档编号、系统、页面文件、逻辑文件、状态（`draft/review/stable`）。
2. 训练目的与能力标签  
   至少到三级能力标签。
3. 理论出处与任务意义  
   至少 2 条参考来源。
4. 玩法、规则、胜利/结束条件  
   必须覆盖自然结束、手动中断、异常结束三类。
5. 参数表  
   `参数ID/类型/默认值/范围/生效时机` 五要素完整。
6. 评分体系  
   指标字段、计算方式、方向（升高好或降低好）、阈值状态。
7. 数据记录  
   会话级字段、题目级字段、无效会话规则。

## 4. 指标分层口径（沿用附录枚举）

来源：`gpt/APPENDIX_ENUMS.md` 与 `glm5/APPENDIX_ENUMS.md`（一致）。

| 层级 | 定义 | 示例 |
|---|---|---|
| L1 | 原始指标 | 正确率、反应时、错误数 |
| L2 | 会话指标 | 均值、波动、稳定性 |
| L3 | 趋势指标 | 最近 N 次变化率 |

## 5. 状态与成熟度口径

| 类别 | 枚举值 |
|---|---|
| 文档状态 | `draft`, `review`, `stable` |
| 任务成熟度 | `active`, `beta`, `planned` |
| 评级标签 | `S`, `A`, `B`, `C`, `D` |

## 6. 参数与数据字段最小集

参数字段最小集：

| 字段 | 说明 |
|---|---|
| `paramId` | 参数唯一键 |
| `type` | INT/FLOAT/STRING/BOOL/ENUM/ARRAY |
| `default` | 默认值 |
| `range` | 取值范围 |
| `applyWhen` | 生效时机 |

记录字段最小集：

```json
{
  "timestamp": 1709012345678,
  "moduleId": "ATT-01",
  "status": "completed",
  "parameters": {},
  "metricsL1": {},
  "metricsL2": {},
  "metricsL3": {}
}
```

## 7. 发布门槛（文档级）

每个模块文档在标记为 `stable` 前，必须通过：

1. 链接有效：内部链接无 404。
2. 枚举合法：状态、成熟度、评级使用统一枚举。
3. 指标闭环：至少 1 个 L1 指标可稳定记录并可解释。
4. 结束条件完备：自然、手动、异常三类可验证。
5. 数据一致：参数字段与记录字段命名一致。

## 8. 推荐执行方式

1. 新模块先按 `gpt/TEMPLATE.md` 快速成稿（`draft`）。
2. 进入评审时补齐到 `glm5/TEMPLATE.md` 深度结构（`review`）。
3. 指标和数据通过后标记 `stable`，同步更新系统索引与汇总索引。
